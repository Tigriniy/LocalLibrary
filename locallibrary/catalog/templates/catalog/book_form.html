{% extends "base_generic.html" %}

{% block content %}
<h1>{% if form.instance.pk %}Редактировать книгу{% else %}Добавить новую книгу{% endif %}</h1>

<form action="" method="post">
    {% csrf_token %}
    <table>
        {{ form.as_table }}
    </table>
    <input type="submit" value="Сохранить" class="btn btn-primary">
    <a href="{% url 'books' %}" class="btn btn-secondary">Отмена</a>
</form>

<script>

    document.addEventListener('DOMContentLoaded', function() {

        const genreSelect = document.querySelector('select[name="genre"]');
        if (genreSelect) {
            genreSelect.setAttribute('multiple', 'multiple');
            genreSelect.setAttribute('size', '6');
        }
    });
</script>
{% endblock %}